---
layout: axe
---
<main id="maincontent" role="main">

  <section v-for="(results, index) in axe" :key="index">
    <h2 v-html="results.title"></h2>
    <p v-html="results.subtitle"></p>

    <table>
      <caption>{{results.subtitle}} Summary</caption>
      <tr>
        <th scope="col">Rule</th>
        <th scope="col">Info</th>
        <th scope="col">Count</th>
        <th scope="col">Impact</th>
      </tr>

      <tr v-for="(rule, index) in results.rules" :key="index">
        <th v-html="rule.help"></th>
        <th scope="row">
          <a href="#" class="rule" data-index="{{rule.index}}">{{rule.help}}</a>
        </th>
        <td scope="row">
          <a target="_blank" v-bind:href="rule.helpUrl">Learn more</a>
        </td>
        <td class="count" v-html="rule.nodes.length"></td>
        <td class="impact" v-html="rule.impact"></td>
      </tr>
    </table>

    <h3>Details</h3>

    <div v-for="(rule, index) in results.rules" :key="index">
      <h4 v-html="rule.help"></h4>
      <h5 v-html="rule.description"></h5>

      <div v-for="(node, index) in rule.nodes" :key="index">
        <h6>Element location</h6>
        <div class="" v-html="node.target"></div>

        <h6>Element source</h6>
        <div></div>
        <div class="" v-html="jsonStringify(node.html)"></div>

        <p>To solve this violation, you need to:</p>
        <p>Fix at least one (<span v-html="node.none.length"></span>) of these issues:</p>
        <ul>
          <li v-for="(item, index) in node.any" :key="index" v-html="item.message"></li>
        </ul>
      </div>
    </div>

  </section>
</main>

{{> footer}}

<script src="https://unpkg.com/vue"></script>
<script>
  const app = new Vue({
    el: '#maincontent',

    data: {
      results: []
    },

    computed: {
      violations: function () {
        return this.results.violations
      },

      incomplete: function () {
        return this.results.incomplete
      },

      axe: function () {
        const axeObject = [
          {
            title: 'Violations',
            subtitle: 'These results indicate what elements failed the rules',
            rules: this.violations
          },
          {
            title: 'Incomplete',
            subtitle: 'These results were aborted and require further testing',
            rules: this.incomplete
          }
        ]

        return axeObject
      }
    },

    methods: {
      jsonStringify: (json) => {
        // return JSON.stringify(json, ['\n', '<br>'], '\t');
        return escape(json);
      }
    },

    mounted: function () {
      const vm = this

      fetch('axe-test.json')
        .then((resp) => resp.json())
        .then((data) => {
          vm.results = data[0];
        })
        .catch(function (error) {
          // If there is any error you will catch them here
          console.dir(error);
        })
    }
  })
</script>
<!--https://github.com/dequelabs/axe-core/blob/master/doc/examples/html-handlebars.md-->
